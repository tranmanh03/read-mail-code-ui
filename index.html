<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Mail Code Checker</title>
    <style>
      body {
        font-family: Arial;
        margin: 30px;
      }
      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }
      .tab {
        padding: 10px 15px;
        background: #ddd;
        border-radius: 5px;
        cursor: pointer;
      }
      .tab.active {
        background: #4285f4;
        color: white;
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      input,
      button {
        padding: 8px;
        margin-top: 10px;
        width: 100%;
        font-size: 16px;
      }
      .output {
        margin-top: 10px;
        font-weight: bold;
        color: green;
      }
    </style>
  </head>
  <body>
    <h2>Lấy mã xác thực email</h2>
    <div class="tabs" id="tabs">
      <div class="tab active" data-tab="mailtm">Mail.tm</div>
      <div class="tab" data-tab="privatemail">PrivateMail</div>
      <div class="tab" data-tab="tempmail">TempMail</div>
      <div class="tab" data-tab="gemmmo">Gemmmo</div>
      <div class="tab" data-tab="hotmail">Hotmail</div>
      <div class="tab" data-tab="unlimitmail">Unlimitmail</div>
    </div>

    <div id="tabContents">
      <div class="tab-content active" id="tab-mailtm">
        <input id="mailtm-input" placeholder="email|password" />
        <button onclick="callAPI('mailtm')">Lấy mã</button>
        <div class="output" id="output-mailtm"></div>
      </div>

      <div class="tab-content" id="tab-privatemail">
        <input
          id="privatemail-input"
          placeholder="emailUser|emailPass|targetEmail"
        />
        <button onclick="callAPI('privatemail')">Lấy mã</button>
        <div class="output" id="output-privatemail"></div>
      </div>

      <div class="tab-content" id="tab-tempmail">
        <input id="tempmail-input" placeholder="id|key" />
        <button onclick="callAPI('tempmail')">Lấy mã</button>
        <div class="output" id="output-tempmail"></div>
      </div>

      <div class="tab-content" id="tab-gemmmo">
        <input id="gemmmo-input" placeholder="email|password" />
        <button onclick="callAPI('gemmmo')">Lấy mã</button>
        <div class="output" id="output-gemmmo"></div>
      </div>

      <div class="tab-content" id="tab-hotmail">
        <input id="hotmail-input" placeholder="email|refresh_token|client_id" />
        <button onclick="callAPI('hotmail')">Lấy mã</button>
        <div class="output" id="output-hotmail"></div>
      </div>

      <div class="tab-content" id="tab-unlimitmail">
        <input id="unlimitmail-input" placeholder="email|token" />
        <button onclick="callAPI('unlimitmail')">Lấy mã</button>
        <div class="output" id="output-unlimitmail"></div>
      </div>
    </div>

    <script>
      const BASE_URL = "https://read-mail-code-production.up.railway.app/";

      document.querySelectorAll(".tab").forEach((tab) => {
        tab.addEventListener("click", () => {
          document
            .querySelectorAll(".tab")
            .forEach((t) => t.classList.remove("active"));
          document
            .querySelectorAll(".tab-content")
            .forEach((c) => c.classList.remove("active"));

          tab.classList.add("active");
          document
            .getElementById(`tab-${tab.dataset.tab}`)
            .classList.add("active");
        });
      });

      async function callAPI(type) {
        const input = document.getElementById(`${type}-input`).value.trim();
        const output = document.getElementById(`output-${type}`);
        const parts = input.split("||");

        let url = "";

        try {
          switch (type) {
            case "mailtm": {
              const [email, password] = parts;
              url = `${BASE_URL}get-code?email=${email}&password=${password}`;
              break;
            }
            case "privatemail": {
              const [emailUser, emailPass, targetEmail] = parts;
              url = `${BASE_URL}get-private-code?emailUser=${emailUser}&emailPass=${emailPass}&targetEmail=${targetEmail}`;
              break;
            }
            case "tempmail": {
              const [id, key] = parts;
              url = `${BASE_URL}get-code-tempmail?id=${id}&key=${key}`;
              break;
            }
            case "gemmmo": {
              const [email, password] = parts;
              url = `${BASE_URL}get-code-gemmmo?email=${email}&password=${password}`;
              break;
            }
            case "hotmail": {
              const [email, refresh_token, client_id] = parts;
              url = `${BASE_URL}read-hotmail?email=${email}&refresh_token=${refresh_token}&client_id=${client_id}`;
              break;
            }
            case "unlimitmail": {
              const [email, token] = parts;
              url = `${BASE_URL}get_unlimitmail_code?email=${email}&token=${token}`;
              break;
            }
            default:
              output.innerText = "Loại không hỗ trợ.";
              return;
          }

          const res = await fetch(url);
          const data = await res.json();

          output.innerText = `Mã xác thực: ${
            data.code || data.token || "Không có"
          }`;
        } catch (err) {
          output.innerText = "Lỗi gọi API!";
        }
      }
    </script>
  </body>
</html>
